import{r as y}from"./regions-CqN045JU.js";import{_ as T,c as k,w as l,r as o,o as c,a as i,e as d,F as v,f as S,d as g,t as h,m as C,b as _}from"./index-BGrv-ePS.js";const G={data(){return{headers:[{title:"Дата",key:"date"},{title:"Субъект РФ",key:"region"},{title:"Час",key:"hour"},{title:"ГЭС",key:"plan_GES"},{title:"АЭС",key:"plan_AES"},{title:"ТЭС",key:"plan_TES"},{title:"СЭС",key:"plan_SES"},{title:"ВЭС",key:"plan_VES"},{title:"Прочие ВИЭ",key:"plan_other"},{title:"ГЭС (мин тех)",key:"techmin_GES"},{title:"АЭС (мин тех)",key:"techmin_AES"},{title:"ТЭС (мин тех)",key:"techmin_TES"},{title:"СЭС (мин тех)",key:"techmin_SES"},{title:"ВЭС (мин тех)",key:"techmin_VES"},{title:"Прочие ВИЭ (мин тех)",key:"techmin_other"},{title:"ГЭС (мин техн)",key:"technomin_GES"},{title:"АЭС (мин техн)",key:"technomin_AES"},{title:"ТЭС (мин техн)",key:"technomin_TES"},{title:"СЭС (мин техн)",key:"technomin_SES"},{title:"ВЭС (мин техн)",key:"technomin_VES"},{title:"Прочие ВИЭ (мин техн)",key:"technomin_other"},{title:"ГЭС (макс тех)",key:"techmax_GES"},{title:"АЭС (макс тех)",key:"techmax_AES"},{title:"ТЭС (макс тех)",key:"techmax_TES"},{title:"СЭС (макс тех)",key:"techmax_SES"},{title:"ВЭС (макс тех)",key:"techmax_VES"},{title:"Прочие ВИЭ (макс тех)",key:"techmax_other"},{title:"План потребления",key:"plan_consumption"},{title:"План экспорта",key:"plan_export"},{title:"План импорта",key:"plan_import"},{title:"Цена покупки",key:"price_buy"},{title:"Цена продажи",key:"price_sell"},{title:"Полный план",key:"full_plan"}],boats:void 0,regions:y,filters:{},selectedRegion:void 0,selectedDateBefore:void 0,selectedDateAfter:void 0,loading:!1}},computed:{virtualBoats(){return this.boats?[...Array(1e4).keys()].map(s=>{const e={...this.boats[s%this.boats.length]};return e.date=`${e.date} #${s}`,e}):[]},filteredItems(){return this.virtualBoats.filter(s=>Object.entries(this.filters).every(([e,a])=>{if(!a)return!0;const u=s[e];return u!=null&&String(u).toLowerCase().includes(a.toLowerCase())}))}},async created(){this.selectedRegion=y[0].value;let s=new Date().toISOString().slice(0,16).replace("T"," "),e=new Date(Date.now()+864e5).toISOString().slice(0,16).replace("T"," ");this.selectedDateBefore=s,this.selectedDateAfter=e;try{this.loading=!0;const a=await fetch(`https://cloud-a.istu.edu/api/table?from=${this.selectedDateBefore}&to=${this.selectedDateAfter}`);this.boats=await a.json()}catch(a){this.errorMessage=a}finally{this.loading=!1}this.headers.forEach(a=>{this.filters[a.key]=""})}},R={class:"flex flex-col items-start"},U={class:"text-center pa-4"},I={key:0},L={key:1};function N(s,e,a,u,t,x){const m=o("v-text-field"),E=o("v-btn"),b=o("v-list-item-title"),V=o("v-list-item"),D=o("v-list"),w=o("v-menu"),p=o("v-row"),B=o("v-data-table-virtual"),A=o("v-container");return c(),k(A,null,{default:l(()=>[i(p,null,{default:l(()=>[i(m,{modelValue:t.selectedDateBefore,"onUpdate:modelValue":e[0]||(e[0]=n=>t.selectedDateBefore=n),label:"Отображать с:",type:"datetime-local",class:"flex-grow-1 me-3 mt-4"},null,8,["modelValue"]),i(m,{modelValue:t.selectedDateAfter,"onUpdate:modelValue":e[1]||(e[1]=n=>t.selectedDateAfter=n),label:"Отображать до:",type:"datetime-local",class:"flex-grow-1 me-3 mt-4"},null,8,["modelValue"]),i(w,{location:s.center},{activator:l(({props:n})=>[i(E,C({color:"blue-grey-lighten-5"},n,{"min-height":"55px",class:"me-3 mt-4"}),{default:l(()=>[g(h(t.selectedRegion),1)]),_:1},16)]),default:l(()=>[i(D,null,{default:l(()=>[(c(!0),d(v,null,S(t.regions,(n,r)=>(c(),k(V,{key:r,value:r,onClick:f=>t.selectedRegion=n.value},{default:l(()=>[i(b,null,{default:l(()=>[g(h(n.value),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["location"])]),_:1}),i(p,null,{default:l(()=>[i(B,{headers:t.headers,items:x.virtualBoats,height:"1055","item-value":"date","fixed-header":"",style:{border:"1px solid rgba(0, 0, 0, 0.2)"}},{headers:l(({columns:n})=>[_("tr",null,[(c(!0),d(v,null,S(n,r=>(c(),d("th",{key:r.key,class:"px-2"},[_("div",R,[_("span",null,h(r.title),1),i(m,{modelValue:t.filters[r.key],"onUpdate:modelValue":f=>t.filters[r.key]=f,density:"compact",variant:"underlined","hide-details":"",class:"mt-1 w-32"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),"no-data":l(()=>[_("div",U,[t.loading?(c(),d("span",I,"Загрузка данных...")):(c(),d("span",L,"Данные отсутствуют"))])]),_:1},8,["headers","items"])]),_:1})]),_:1})}const F=T(G,[["render",N]]);export{F as default};
